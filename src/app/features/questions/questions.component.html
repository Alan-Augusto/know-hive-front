<div class="question-container">
  <div class="flex align-items-center gap-2 flex-wrap" [style.color]="'var(--p-text-base)'">
    <h2 class="m-0 emoji">ğŸ“ƒ</h2>
    <h2>Explore suas questÃµes.</h2>
  </div>

  @if(dataSource().length > 10){
  <div class="search-container">
    <input pInputText class="flex-1" autocomplete="off" placeholder="Procure por suas questÃµes..."
      [ngModel]="searchTerm()" (ngModelChange)="setSearchTerm($event)" />
    <kh-button type="secondary" class="w-10rem ml-2">
      <i class="ti ti-search"></i>
      <span class="search-text">Pesquisar</span>
    </kh-button>
  </div>
  }

  <div class="flex flex-row align-items-center gap-2 flex-wrap">
    <div class="flex-1 list-options">
      <kh-button size="small" [type]="optionSelect()=='question' ? 'secondary' : 'tertiary'" class="w-10rem"
        (click)="setOptionSelect('question')">Todas as questÃµes</kh-button>
      <kh-button size="small" [type]="optionSelect()=='create_with_me' ? 'secondary' : 'tertiary'" class="w-10rem"
        (click)="setOptionSelect('create_with_me')">Criadas por mim</kh-button>
      <kh-button size="small" [type]="optionSelect()=='share_with_me' ? 'secondary' : 'tertiary'" class="w-10rem"
        (click)="setOptionSelect('share_with_me')">Compartilhados comigo</kh-button>
    </div>

    <div class="flex flex-row gap-1">
      <kh-button size="small" type="secondary" [onlyIcon]="true" (click)="toggleDisplayMode()"
        [pTooltip]="'Mudar modo de exibiÃ§Ã£o'" tooltipPosition="top">
        <i [class]="iconDisplayMode()"></i>
      </kh-button>
      <kh-button size="small" (click)="createQuestion()">
        <i class="ti ti-plus"></i>
        <span class="ml-2">Nova QuestÃ£o</span>
      </kh-button>
    </div>

  </div>

  <div class="list-container">
    <dynamic-data-view
      [data]="dataSource()"
      [columnDefs]="columnDefs()"
      [viewMode]="displayMode()"
      [cardTemplate]="customCard"
    />
  </div>
</div>

<ng-template #customCard let-item>
    <div class="flex align-items-start justify-content-between mb-2">
      <h3 class="card-title m-0 text-900 font-medium">{{ item.title }}</h3>
      <span class="question-type px-2 py-1 border-round text-xs bg-primary-50 text-primary-600">
        {{ item.type?.name }}
      </span>
    </div>

    <p class="text-600 text-sm mb-3 line-height-3">{{ item.statement }}</p>

    <div class="flex align-items-center justify-content-between">
      <div class="flex align-items-center gap-2">
        <img [src]="item.author?.profile_picture" [alt]="item.author?.name"
             class="w-2rem h-2rem border-circle" />
        <span class="text-sm text-600">{{ item.author?.name }}</span>
      </div>
      <span class="text-xs text-400">{{ item.created_at | date }}</span>
    </div>
</ng-template>
